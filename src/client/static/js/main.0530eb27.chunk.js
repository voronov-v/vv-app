(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{158:function(e,t,a){e.exports=a.p+"static/media/vv_logo.f8b26f0f.jpg"},212:function(e,t,a){e.exports=a.p+"static/media/torontoImg.3c573d34.jpg"},213:function(e,t,a){e.exports=a.p+"static/media/dubaiImg.df994899.jpg"},214:function(e,t,a){e.exports=a.p+"static/media/los-angelesImg.73d8ec96.jpg"},215:function(e,t,a){e.exports=a.p+"static/media/londonImg.841651c3.jpg"},217:function(e,t,a){e.exports=a.p+"static/media/mapBackgroundImg.c21df147.jpg"},218:function(e,t,a){e.exports=a.p+"static/media/sanFransiscoImg.23aadf81.jpg"},219:function(e,t,a){e.exports=a.p+"static/media/cancunImg.cd98e2c3.jpg"},228:function(e,t,a){e.exports=a.p+"static/media/googleLogo.f4a5f9ab.jpg"},236:function(e,t,a){e.exports=a(422)},241:function(e,t,a){},294:function(e,t,a){},316:function(e,t,a){},319:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},420:function(e,t,a){},421:function(e,t,a){},422:function(e,t,a){"use strict";a.r(t);var n=a(84),r=a.n(n),l=a(102),i=a(0),s=a.n(i),c=a(25),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=a(35),u=a(424),g=(a(241),a(34)),d=a(43),E=function(){return s.a.createElement("h2",null,"NotFound")},p=a(50),h=a(47);function f(){var e=Object(p.a)(["\n  query User($id: ID!, $bookingsPage: Int!, $listingsPage: Int!, $limit: Int!) {\n    user(id: $id) {\n      id\n      name\n      avatar\n      contact\n      hasWallet\n      income\n      bookings(limit: $limit, page: $bookingsPage) {\n        total\n        result {\n          id\n          listing {\n            id\n            title\n            image\n            address\n            price\n            numOfGuests\n          }\n          checkIn\n          checkOut\n        }\n      }\n      listings(limit: $limit, page: $listingsPage) {\n        total\n        result {\n          id\n          title\n          image\n          address\n          price\n          numOfGuests\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}var v=Object(h.b)(f()),b=a(159),_=a(432),y=a(235),O=a(95),k=a(425),N=a(429),w=a(435),I=a(233),j=a(234),P=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t?Math.round(e/100):e;return"$".concat(a)},x=function(e,t){return I.a.success({message:e,description:t,placement:"topLeft",style:{marginTop:50}})},S=function(e){return j.b.error(e)};function C(){var e=Object(p.a)(["\n  mutation DisconnectStripe {\n    disconnectStripe {\n      hasWallet\n    }\n  }\n"]);return C=function(){return e},e}var T=Object(h.b)(C()),L="https://connect.stripe.com/oauth/authorize?response_type=code&client_id=".concat("ca_I59GT5uz9PrXwAzGYUAptCLk4u20f6MD","&scope=read_write"),H=_.a.Title,W=_.a.Paragraph,$=_.a.Text,G=function(e){var t=e.user,a=e.viewer,n=e.setViewer,r=e.viewerIsUser,l=e.handleUserRefetch,i=Object(u.b)(T,{onCompleted:function(e){e&&e.disconnectStripe&&(n(Object(b.a)({},a,{hasWallet:e.disconnectStripe.hasWallet})),x("You've successfully disconnected from Stripe!","You'll have to reconnect with Stripe to continue to create listings."),l())},onError:function(){S("Sorry! We weren't able to disconnect you from Stripe. Please try again later!")}}),c=Object(m.a)(i,2),o=c[0],g=c[1].loading,d=t.hasWallet?s.a.createElement(s.a.Fragment,null,s.a.createElement(W,null,s.a.createElement(y.a,{color:"green"},"Stripe Registered")),s.a.createElement(W,null,"Income Earned: ","",s.a.createElement($,{strong:!0},t.income?P(t.income):"$0")),s.a.createElement(O.a,{type:"primary",className:"user-profile__details-cta",loading:g,onClick:function(){return o()}},"Disconnect Stripe"),s.a.createElement(W,null,"By disconnecting, you won't be able to receive ",s.a.createElement($,{strong:!0},"any further payments"),". This will prevent users from booking listing that you might have already created")):s.a.createElement(s.a.Fragment,null,s.a.createElement(W,null,"Interested in becoming a TinyHouse host? Register with your Stripe account!"),s.a.createElement(O.a,{type:"primary",className:"user-profile__details-cta",onClick:function(){window.location.href=L}},"Connect with Stripe"),s.a.createElement(W,{type:"secondary"},"TinyHouse uses"," ",s.a.createElement("a",{href:"https://stripe.com/en-US/connect",target:"_blank",rel:"noopener noreferrer"},"Stripe")," ","to help transfer your earnings in a secure and truster manner.")),E=r?s.a.createElement(s.a.Fragment,null,s.a.createElement(k.a,null),s.a.createElement("div",{className:"user-profile__details"},s.a.createElement(H,{level:4},"Additional Details"),d)):null;return s.a.createElement("div",{className:"user-profile"},s.a.createElement(N.a,{className:"user-profile__card"},s.a.createElement("div",{className:"user-profile__avatar"},s.a.createElement(w.a,{size:100,src:t.avatar})),s.a.createElement(k.a,null),s.a.createElement("div",{className:"user-profile__details"},s.a.createElement(H,{level:4},"Details"),s.a.createElement(W,null,"Name: ",s.a.createElement($,{strong:!0},t.name)),s.a.createElement(W,null,"Contact: ",s.a.createElement($,{strong:!0},t.contact))),E))},R=a(426),B=a(113),D=a(75),A=a(437),U=function(e){var t=e.message,a=void 0===t?"Uh oh! Something went wrong :(":t,n=e.description,r=void 0===n?"Look like something went wrong. Please check your connection and/or try again later.":n;return s.a.createElement(A.a,{banner:!0,closable:!0,message:a,description:r,type:"error",className:"error-banner"})},q=a(433),z=function(){var e=s.a.createElement(q.a,{active:!0,paragraph:{rows:4},className:"page-skeleton__paragraph"});return s.a.createElement(s.a.Fragment,null,e,e,e)},Y=a(440),F=a(441),M=(a(294),_.a.Text),V=_.a.Title,J=function(e){var t=e.listing,a=t.id,n=t.title,r=t.image,l=t.address,i=t.price,c=t.numOfGuests;return s.a.createElement(g.b,{to:"/listing/".concat(a)},s.a.createElement(N.a,{hoverable:!0,cover:s.a.createElement("div",{className:"listing-card__cover-img",style:{backgroundImage:"url(".concat(r,")")}})},s.a.createElement("div",{className:"listing-card__details"},s.a.createElement("div",{className:"listing-card__description"},s.a.createElement(V,{level:4,className:"listing-card__price"},P(i),s.a.createElement("span",null,"/day")),s.a.createElement(M,{strong:!0,ellipsis:!0,className:"listing-card__title"},n),s.a.createElement(M,{ellipsis:!0,className:"listing-card__location"},l)),s.a.createElement("div",{className:"listing-card__dimensions listing-card_dimensions--guests"},s.a.createElement(F.a,{style:{color:"#1890ff"}}),s.a.createElement(M,null," ",c," guests")))))},X=_.a.Paragraph,K=_.a.Title,Z=function(e){var t=e.userListings,a=e.listingPage,n=e.limit,r=e.setListingsPage,l=t.total,i=t.result,c=s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,lg:4},dataSource:i,locale:{emptyText:"User doesn't have any listings yet!"},pagination:{position:"top",current:a,total:l,defaultPageSize:n,hideOnSinglePage:!0,showLessItems:!0,onChange:function(e){return r(e)}},renderItem:function(e){return s.a.createElement(Y.b.Item,null,s.a.createElement(J,{listing:e}))}});return s.a.createElement("div",{className:"user-listings"},s.a.createElement(K,{level:4,className:"user-listings__title"},"Listings"),s.a.createElement(X,{className:"user-listings__description"},"This section highlights the listings this user current;y hosts and has made available for bookings."),c)},Q=_.a.Paragraph,ee=_.a.Title,te=_.a.Text,ae=function(e){var t=e.userBookings,a=e.bookingsPage,n=e.limit,r=e.setBookingsPage,l=t?t.total:null,i=t?t.result:null,c=t?s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,lg:4},dataSource:i||void 0,locale:{emptyText:"User doesn't have any bookings yet!"},pagination:{position:"top",current:a,total:l||void 0,defaultPageSize:n,hideOnSinglePage:!0,showLessItems:!0,onChange:function(e){return r(e)}},renderItem:function(e){var t=s.a.createElement("div",{className:"user-bookings__booking-history"},s.a.createElement("div",null,"Check in: ",s.a.createElement(te,{strong:!0},e.checkIn)),s.a.createElement("div",null,"Check out: ",s.a.createElement(te,{strong:!0},e.checkOut)));return s.a.createElement(Y.b.Item,null,t,s.a.createElement(J,{listing:e.listing}))}}):null;return c?s.a.createElement("div",{className:"user-bookings"},s.a.createElement(ee,{level:4,className:"user-bookings__title"},"Bookings"),s.a.createElement(Q,{className:"user-bookings__description"},"This section highlights the bookings you've made, and the chech-in/check-out dates associated with said bookings"),c):null},ne=(a(316),function(e){var t=e.match,a=e.viewer,n=e.setViewer,c=Object(i.useState)(1),o=Object(m.a)(c,2),g=o[0],d=o[1],E=Object(i.useState)(1),p=Object(m.a)(E,2),h=p[0],f=p[1],b=Object(u.c)(v,{variables:{id:t.params.id,bookingsPage:h,listingsPage:g,limit:4}}),_=b.data,y=b.loading,O=b.error,k=b.refetch,N=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=new URL(window.location.href).searchParams.get("stripe_error")?s.a.createElement(U,{description:"We had an issue connecting with Stripe. Please try again soon."}):null;if(y)return s.a.createElement(R.a.Content,{className:"user"},s.a.createElement(z,null));if(O)return s.a.createElement(R.a.Content,{className:"user"},s.a.createElement(U,{description:"This user may not exists or we've encountered an error."}),s.a.createElement(z,null));var I=_?_.user:null,j=a.id===t.params.id,P=I?I.listings:null,x=I?I.bookings:null,S=P?s.a.createElement(Z,{userListings:P,listingPage:g,limit:4,setListingsPage:d}):null,C=P?s.a.createElement(ae,{userBookings:x,bookingsPage:h,limit:4,setBookingsPage:f}):null,T=I?s.a.createElement(G,{user:I,viewerIsUser:j,viewer:a,setViewer:n,handleUserRefetch:N}):null;return s.a.createElement(R.a.Content,{className:"user"},w,s.a.createElement(B.a,{gutter:12,justify:"space-between",style:{display:"flex"}},s.a.createElement(D.a,{xs:24},T),s.a.createElement(D.a,{xs:24},S,C)))});function re(){var e=Object(p.a)(["\n  query Listings($location: String, $filter: ListingsFilter!, $limit: Int!, $page: Int!) {\n    listings(location: $location, filter: $filter, limit: $limit, page: $page) {\n      region\n      total\n      result {\n        id\n        title\n        image\n        address\n        price\n        numOfGuests\n      }\n    }\n  }\n"]);return re=function(){return e},e}var le,ie,se=Object(h.b)(re()),ce=a(436),oe=(a(319),a(212)),me=a.n(oe),ue=a(213),ge=a.n(ue),de=a(214),Ee=a.n(de),pe=a(215),he=a.n(pe),fe=_.a.Title,ve=ce.a.Search,be=function(e){var t=e.onSearch;return s.a.createElement("div",{className:"home-hero"},s.a.createElement("div",{className:"home-hero__search"},s.a.createElement(fe,{className:"home-hero__title"},"Find a place you'll love to stay at"),s.a.createElement(ve,{placeholder:"Search 'San Fransisco'",size:"large",enterButton:!0,className:"home-hero__search-input",onSearch:t})),s.a.createElement(B.a,{gutter:12,className:"home-hero__cards"},s.a.createElement(D.a,{xs:12,md:6},s.a.createElement(g.b,{to:"/listings/toronto"},s.a.createElement(N.a,{cover:s.a.createElement("img",{alt:"Toronto",src:me.a})},"Toronto"))),s.a.createElement(D.a,{xs:12,md:6},s.a.createElement(g.b,{to:"/listings/dubai"},s.a.createElement(N.a,{cover:s.a.createElement("img",{alt:"Dubai",src:ge.a})},"Dubai"))),s.a.createElement(D.a,{xs:0,md:6},s.a.createElement(g.b,{to:"/listings/los%20angeles"},s.a.createElement(N.a,{cover:s.a.createElement("img",{alt:"Los Angeles",src:Ee.a})},"Los Angeles"))),s.a.createElement(D.a,{xs:0,md:6},s.a.createElement(g.b,{to:"/listings/london"},s.a.createElement(N.a,{cover:s.a.createElement("img",{alt:"London",src:he.a})},"London")))))},_e=(a(324),_.a.Title),ye=function(e){var t=e.title,a=e.listings;return s.a.createElement("div",{className:"home-listings"},s.a.createElement(_e,{level:4,className:"home-listings__title"},t),s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,md:2,lg:4,xl:4,xxl:4},dataSource:a,renderItem:function(e){return s.a.createElement(Y.b.Item,null,s.a.createElement(J,{listing:e}))}}))},Oe=(a(325),function(){return s.a.createElement("div",{className:"home-listings-skeleton"},s.a.createElement(q.a,{paragraph:{rows:0}}),s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,md:2,lg:4,xl:4,xxl:4},dataSource:[{},{},{},{}],renderItem:function(){return s.a.createElement(Y.b.Item,null,s.a.createElement(N.a,{cover:s.a.createElement("div",{className:"home-listings-skeleton__card-cover-img"}),loading:!0}))}}))}),ke=(a(326),a(217)),Ne=a.n(ke),we=a(218),Ie=a.n(we),je=a(219),Pe=a.n(je);!function(e){e.APARTMENT="APARTMENT",e.HOUSE="HOUSE"}(le||(le={})),function(e){e.PRICE_HIGH_TO_LOW="PRICE_HIGH_TO_LOW",e.PRICE_LOW_TO_HIGH="PRICE_LOW_TO_HIGH"}(ie||(ie={}));var xe=_.a.Title,Se=_.a.Paragraph,Ce=function(e){var t=e.history,a=Object(u.c)(se,{variables:{filter:ie.PRICE_HIGH_TO_LOW,page:1,limit:4}}),n=a.data,r=a.loading;return s.a.createElement(R.a.Content,{className:"home",style:{backgroundImage:"url(".concat(Ne.a,")")}},s.a.createElement(be,{onSearch:function(e){var a=e.trim();a?t.push("listings/".concat(a)):S("Please enter a valid search!")}}),s.a.createElement("div",{className:"home__cta-section"},s.a.createElement(xe,{level:2,className:"home__cta-section-title"},"Your guide for all things rental"),s.a.createElement(Se,null,"Helping you make the best decisions in renting your last minute locations"),s.a.createElement(g.b,{to:"/listings/united%20states",className:"ant-btn ant-btn-primary ant-btn-lg home__cta-section-button"},"Popular listings in the United States")),r?s.a.createElement(Oe,null):n?s.a.createElement(ye,{title:"Premium Listings",listings:n.listings.result}):null,s.a.createElement("div",{className:"home__listings"},s.a.createElement(xe,{level:4,className:"home__listings-title"},"Listings of any kind"),s.a.createElement(B.a,{gutter:12},s.a.createElement(D.a,{xs:24,sm:12},s.a.createElement(g.b,{to:"/listings/san%20fransisco"},s.a.createElement("div",{className:"home__listings-img-cover"},s.a.createElement("img",{src:Ie.a,alt:"San Fransisco",className:"home__listings-img"})))),s.a.createElement(D.a,{xs:24,sm:12},s.a.createElement(g.b,{to:"/listings/cancun"},s.a.createElement("div",{className:"home__listings-img-cover"},s.a.createElement("img",{src:Pe.a,alt:"Cancun",className:"home__listings-img"})))))))};function Te(){var e=Object(p.a)(["\n  query Listing($id: ID!, $bookingsPage: Int!, $limit: Int!) {\n    listing(id: $id) {\n      id\n      title\n      description\n      image\n      host {\n        id\n        name\n        avatar\n        hasWallet\n      }\n      type\n      address\n      city\n      bookings(limit: $limit, page: $bookingsPage) {\n        total\n        result {\n          id\n          tenant {\n            id\n            name\n            avatar\n          }\n          checkIn\n          checkOut\n        }\n      }\n      bookingsIndex\n      price\n      numOfGuests\n    }\n  }  \n"]);return Te=function(){return e},e}var Le=Object(h.b)(Te()),He=a(442),We=(a(327),_.a.Paragraph),$e=_.a.Title,Ge=function(e){var t=e.listing,a=t.title,n=t.description,r=t.image,l=t.type,i=t.address,c=t.city,o=t.numOfGuests,m=t.host;return s.a.createElement("div",{className:"listing-details"},s.a.createElement("div",{style:{backgroundImage:"url(".concat(r,")")},className:"listing-details__image"}),s.a.createElement("div",{className:"listing-details__information"},s.a.createElement(We,{type:"secondary",ellipsis:!0,className:"listing-details__city-address"},s.a.createElement(g.b,{to:"/listings/".concat(c)},s.a.createElement(He.a,{style:{color:"#1890ff"}})," ",c),s.a.createElement(k.a,{type:"vertical"}),i),s.a.createElement($e,{level:3,className:"listing-details__title"},a)),s.a.createElement(k.a,null),s.a.createElement("div",{className:"listing-details__section"},s.a.createElement(g.b,{to:"/host/".concat(m.id)},s.a.createElement(w.a,{src:m.avatar,size:64}),s.a.createElement($e,{level:2,className:"listing-details__host-name"},m.name))),s.a.createElement(k.a,null),s.a.createElement("div",{className:"listing-details__section"},s.a.createElement($e,{level:4},"About this space"),s.a.createElement("div",{className:"listing-details__about-items"},s.a.createElement(y.a,{color:"magenta"},l),s.a.createElement(y.a,{color:"magenta"},o," Guests")),s.a.createElement(We,{ellipsis:{rows:3,expandable:!0}},n)))},Re=(a(328),_.a.Title),Be=_.a.Text,De=function(e){var t=e.listingBookings,a=e.bookingsPage,n=e.limit,r=e.setBookingsPage,l=t?t.total:null,i=t?t.result:null,c=t?s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,lg:3},dataSource:i||void 0,locale:{emptyText:"No bookings have been made yet!"},pagination:{current:a,total:l||void 0,defaultPageSize:n,hideOnSinglePage:!0,showLessItems:!0,onChange:function(e){return r(e)}},renderItem:function(e){var t=s.a.createElement("div",{className:"listing-bookings__history"},s.a.createElement("div",null,"Check in: ",s.a.createElement(Be,{strong:!0},e.checkIn)),s.a.createElement("div",null,"Check out: ",s.a.createElement(Be,{strong:!0},e.checkOut)));return s.a.createElement(Y.b.Item,null,t,s.a.createElement(g.b,{to:"/user/".concat(e.tenant.id)},s.a.createElement(w.a,{src:e.tenant.avatar,size:64,shape:"square"})))}}):null;return c?s.a.createElement("div",{className:"user-bookings"},s.a.createElement(k.a,null),s.a.createElement("div",{className:"listing-bookings-section"},s.a.createElement(Re,{level:4},"Bookings")),c):null},Ae=a(427),Ue=(a(329),a(173)),qe=a.n(Ue),ze=_.a.Paragraph,Ye=_.a.Title,Fe=function(e){var t=e.price,a=e.checkInDate,n=e.checkOutDate,r=e.setCheckInDate,l=e.setCheckOutDate,i=function(e){return!!e&&e.isBefore(qe()().endOf("day"))};return s.a.createElement("div",{className:"listing-booking"},s.a.createElement(N.a,{className:"listing-booking__card"},s.a.createElement("div",null,s.a.createElement(ze,null,s.a.createElement(Ye,{level:2,className:"listing-booking__card-title"},P(t),s.a.createElement("span",null,"/day"))),s.a.createElement(k.a,null),s.a.createElement("div",{className:"listing-booking__card-date-picker"},s.a.createElement(ze,{strong:!0},"Check in"),s.a.createElement(Ae.a,{value:a,onChange:function(e){return r(e)},format:"YYYY/MM/DD",disabledDate:i,showToday:!1,onOpenChange:function(){return l(null)}})),s.a.createElement("div",{className:"listing-booking__card-date-picker"},s.a.createElement(ze,{strong:!0},"Check out"),s.a.createElement(Ae.a,{value:n,onChange:function(e){return function(e){if(a&&e&&qe()(e).isBefore(a,"days"))return S("You can't book date of check out to be prior to check in!");l(e)}(e)},format:"YYYY/MM/DD",disabledDate:i,showToday:!1,disabled:!a}))),s.a.createElement(k.a,null),s.a.createElement(O.a,{disabled:!a||!n,size:"large",type:"primary",className:"listing-booking__card-cta"},"Request to book!")))},Me=(a(336),function(e){var t=e.match,a=Object(i.useState)(1),n=Object(m.a)(a,2),r=n[0],l=n[1],c=Object(i.useState)(null),o=Object(m.a)(c,2),g=o[0],d=o[1],E=Object(i.useState)(null),p=Object(m.a)(E,2),h=p[0],f=p[1],v=Object(u.c)(Le,{variables:{id:t.params.id,bookingsPage:r,limit:3}}),b=v.data,_=v.error,y=v.loading;if(console.log("data",b),console.log("error",_),console.log("loading",y),y)return s.a.createElement(R.a.Content,{className:"listing"},s.a.createElement(z,null));if(_)return s.a.createElement(R.a.Content,{className:"listing"},s.a.createElement(U,{description:"This listing may not exists or we've encountered an error. Please try again soon!"}),s.a.createElement(z,null));var O=b?b.listing:null,k=O?O.bookings:null,N=O?s.a.createElement(Ge,{listing:O}):null,w=k?s.a.createElement(De,{listingBookings:k,bookingsPage:r,limit:3,setBookingsPage:l}):null,I=O?s.a.createElement(Fe,{price:O.price,checkInDate:g,checkOutDate:h,setCheckInDate:d,setCheckOutDate:f}):null;return s.a.createElement(R.a.Content,{className:"listing"},s.a.createElement(B.a,{gutter:24,justify:"space-between"},s.a.createElement(D.a,{xs:24,lg:14},N,w),s.a.createElement(D.a,{xs:24,lg:10},I)))}),Ve=(a(337),a(438)),Je=(a(338),a(128)),Xe=function(e){var t=e.filter,a=e.setFilter;return s.a.createElement("div",{className:"listings-filters"},s.a.createElement("span",null,"Filter by "),s.a.createElement(Je.a,{value:t,onChange:function(e){return a(e)}},s.a.createElement(Je.a.Option,{value:ie.PRICE_LOW_TO_HIGH},"Price: Low to High"),s.a.createElement(Je.a.Option,{value:ie.PRICE_HIGH_TO_LOW},"Price: High to Low")))},Ke=(a(339),a(231)),Ze=function(e){var t=e.total,a=e.page,n=e.limit,r=e.setPage;return s.a.createElement(Ke.a,{current:a,total:t,defaultPageSize:n,hideOnSinglePage:!0,showSizeChanger:!1,showLessItems:!0,onChange:function(e){return r(e)},className:"listings-pagination"})},Qe=(a(340),function(){return s.a.createElement("div",{className:"listings-skeleton"},s.a.createElement(q.a,{paragraph:{rows:1}}),s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,md:2,lg:4,xl:4,xxl:4},dataSource:[{},{},{},{},{},{},{},{}],renderItem:function(){return s.a.createElement(Y.b.Item,null,s.a.createElement(N.a,{cover:s.a.createElement("div",{className:"listings-skeleton__card"}),loading:!0}))}}))}),et=_.a.Text,tt=_.a.Title,at=_.a.Paragraph,nt=function(e){var t=e.match,a=Object(i.useRef)(t.params.location),n=Object(i.useState)(1),r=Object(m.a)(n,2),l=r[0],c=r[1],o=Object(i.useState)(ie.PRICE_HIGH_TO_LOW),d=Object(m.a)(o,2),E=d[0],p=d[1],h=Object(u.c)(se,{skip:a.current!==t.params.location&&1!==l,variables:{location:t.params.location,limit:8,filter:E,page:l}}),f=h.data,v=h.loading,b=h.error;if(Object(i.useEffect)((function(){c(1),a.current=t.params.location}),[t.params.location]),v||b)return s.a.createElement(R.a.Content,{className:"listings"},b&&s.a.createElement(U,{description:"We either couldn't find anything matching your search or have encountered an error. If you're searching for a unique location, try searching again with more common keyword."}),s.a.createElement(Qe,null));var _=f?f.listings:null,y=_?_.region:null,O=_&&_.result.length?s.a.createElement("div",null,s.a.createElement(Ve.a,{offsetTop:64},s.a.createElement(Ze,{total:_.total,page:l,setPage:c,limit:8}),s.a.createElement(Xe,{filter:E,setFilter:p})),s.a.createElement(Y.b,{grid:{gutter:8,xs:1,sm:2,md:2,lg:4,xl:4,xxl:4},dataSource:_.result,renderItem:function(e){return s.a.createElement(Y.b.Item,null,s.a.createElement(J,{listing:e}))}})):s.a.createElement("div",null,s.a.createElement(at,null,"It appears that no listings have yet been created for ",s.a.createElement(et,{mark:!0},y)),s.a.createElement(at,{strong:!0},"Be the first person to create a ",s.a.createElement(g.b,{to:"/host"},"listing in this ares"),"!")),k=y?s.a.createElement(tt,{level:3,className:"listings__title"},'Results for "',y,'"'):null;return s.a.createElement(R.a.Content,{className:"listings"},k,O)};a(341);function rt(){var e=Object(p.a)(["\n  mutation ConnectStripe($input: ConnectStripeInput!) {\n    connectStripe(input: $input) {\n      hasWallet\n    }\n  }\n"]);return rt=function(){return e},e}var lt=Object(h.b)(rt()),it=a(209),st=function(e){var t=e.viewer,a=e.setViewer,n=e.history,r=Object(u.b)(lt,{onCompleted:function(e){e&&e.connectStripe&&(a(Object(b.a)({},t,{hasWallet:e.connectStripe.hasWallet})),x("You've successfully connected your Stripe Account!","You can now begin to create listings in the Host page"))}}),l=Object(m.a)(r,2),c=l[0],o=l[1],g=o.data,E=(o.loading,o.error,Object(i.useRef)(c));return Object(i.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("code");e?E.current({variables:{input:{code:e}}}):n.replace("/login")}),[n]),g&&g.connectStripe?s.a.createElement(d.a,{to:"/user/".concat(t.id)}):s.a.createElement(R.a.Content,{className:"stripe"},s.a.createElement(it.a,{size:"large",tip:"Connecting your Stripe account..."}))},ct=(a(342),a(431)),ot=a(434),mt=a(439),ut=a(428),gt=a(443),dt=a(444),Et=a(445),pt=a(446);function ht(){var e=Object(p.a)(["\n  mutation HostListing($input: HostListingInput!) {\n    hostListing(input: $input) {\n      id\n    }\n  }\n"]);return ht=function(){return e},e}var ft=Object(h.b)(ht()),vt=_.a.Text,bt=_.a.Title,_t=function(e){var t=e.viewer,a=Object(i.useState)(!1),n=Object(m.a)(a,2),r=n[0],l=n[1],c=Object(i.useState)(null),o=Object(m.a)(c,2),E=o[0],p=o[1],h=Object(u.b)(ft,{onCompleted:function(){x("You've successfully created ypur listing!")},onError:function(){S("Sorry! We weren't able to create your listing. Please try again later.")}}),f=Object(m.a)(h,2),v=f[0],b=f[1],_=b.loading,y=b.data,k=Object(i.useRef)(v);return t.id&&t.hasWallet?_?s.a.createElement(R.a.Content,{className:"host-content"},s.a.createElement("div",{className:"host__form-header"},s.a.createElement(bt,{level:4,className:"host__form-title"},"Please wait!"),s.a.createElement(vt,{type:"secondary"},"We're creating your listing now"))):y&&y.hostListing?s.a.createElement(d.a,{to:"/listing/".concat(y.hostListing.id)}):s.a.createElement(R.a.Content,{className:"host-content"},s.a.createElement(ct.a,{layout:"vertical",onFinish:function(e){var t="".concat(e.address,", ").concat(e.city," ").concat(e.state,", ").concat(e.postalCode),a={title:e.title,description:e.description,image:E||"",type:e.type,address:t,price:100*e.price,numOfGuests:e.numOfGuests};k.current({variables:{input:a}})}},s.a.createElement("div",{className:"host__form-header"},s.a.createElement(bt,{level:3,className:"host__form-title"},"Hi! Let's get started listing your place"),s.a.createElement(vt,{type:"secondary"},"In this form, we'll collect some basic and additional information about your listing")),s.a.createElement(ct.a.Item,{label:"Type",name:"type",rules:[{required:!0,message:"Please select a home type"}]},s.a.createElement(ot.a.Group,null,s.a.createElement(ot.a.Button,{value:le.APARTMENT},s.a.createElement(gt.a,{style:{color:"#1890ff"}})," ",s.a.createElement("span",null,"Apartment")),s.a.createElement(ot.a.Button,{value:le.HOUSE},s.a.createElement(dt.a,{style:{color:"#1890ff"}})," ",s.a.createElement("span",null,"House")))),s.a.createElement(ct.a.Item,{label:"Max # of Guests",name:"numOfGuests",rules:[{required:!0,message:"Please enter a max number of guests!"}]},s.a.createElement(mt.a,{min:1,placeholder:"4"})),s.a.createElement(ct.a.Item,{label:"Title",name:"title",extra:"Max character count of 45",rules:[{required:!0,message:"Please enter a title for your listing!"}]},s.a.createElement(ce.a,{maxLength:45,placeholder:"The iconic and luxurious Bel-Air mansion"})),s.a.createElement(ct.a.Item,{label:"Description of listing",name:"description",extra:"Max character count of 400",rules:[{required:!0,message:"Please enter a description for your listing!"}]},s.a.createElement(ce.a.TextArea,{rows:3,maxLength:400,placeholder:"Modern, clean, and iconic home of the Fresh Prince. Situated in the heart of Bel-Air, Los Angeles."})),s.a.createElement(ct.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please enter a address for your listing!"}]},s.a.createElement(ce.a,{maxLength:150,placeholder:"251 North Bristol Avenue"})),s.a.createElement(ct.a.Item,{label:"City/Town",name:"city",rules:[{required:!0,message:"Please enter a city (or region) for your listing!"}]},s.a.createElement(ce.a,{maxLength:45,placeholder:"Los Angeles"})),s.a.createElement(ct.a.Item,{label:"State/Province",name:"state",rules:[{required:!0,message:"Please enter a state (or province) for your listing!"}]},s.a.createElement(ce.a,{maxLength:45,placeholder:"California"})),s.a.createElement(ct.a.Item,{label:"Zip/Postal Code",name:"postalCode",rules:[{required:!0,message:"Please enter a zip (or postal) code for your listing!"}]},s.a.createElement(ce.a,{maxLength:45,placeholder:"Please en ter a zip code for your listing!"})),s.a.createElement(ct.a.Item,{label:"Image",name:"image",extra:"Images have to be under 1MB in size and of type JPG or PNG",rules:[{required:!0,message:"Please provide an image for your listing!"}]},s.a.createElement("div",{className:"host__form-image-upload"},s.a.createElement(ut.a,{name:"image",listType:"picture-card",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:yt,onChange:function(e){var t=e.file;"uploading"!==t.status?"done"===t.status&&t.originFileObj&&Ot(t.originFileObj,(function(e){p(e),l(!1)})):l(!0)}},E?s.a.createElement("img",{src:E,alt:"listing"}):s.a.createElement("div",null,r?s.a.createElement(Et.a,null):s.a.createElement(pt.a,null),s.a.createElement("div",{className:"ant-upload-text"},"Upload"))))),s.a.createElement(ct.a.Item,{label:"Price",name:"price",extra:"Price $USD/day",rules:[{required:!0,message:"Please enter a price for your listing!"}]},s.a.createElement(mt.a,{min:0,placeholder:"120"})),s.a.createElement(ct.a.Item,null,s.a.createElement(O.a,{type:"primary",htmlType:"submit"},"Submit")))):s.a.createElement(R.a.Content,{className:"host-content"},s.a.createElement("div",{className:"host__form-header"},s.a.createElement(bt,{level:4,className:"host__form-title"},"You'll have to be signed in and connected with Stripe to host a listing!"),s.a.createElement(vt,{type:"secondary"},"We only allow users who've signed in to our application and have connected with Stripe to host new listings. You can sign in at the ",s.a.createElement(g.b,{to:"/login"},"/login")," page and connect with Stripe shortly after.")))},yt=function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<1;return t?a?t&&a:(S("You're only able to upload valid image files of under 1MB in size! or PNG files!"),!1):(S("You're only able to upload valid JPG or PNG files!"),!1)},Ot=function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)}},kt=a(228),Nt=a.n(kt);function wt(){var e=Object(p.a)(["\n  mutation LogIn($input: LogInInput) {\n    logIn(input: $input) {\n      id\n      token\n      avatar\n      hasWallet\n      didRequest\n    }\n  }\n"]);return wt=function(){return e},e}var It=Object(h.b)(wt());function jt(){var e=Object(p.a)(["\n  query AuthUrl {\n    authUrl\n  }\n"]);return jt=function(){return e},e}var Pt=Object(h.b)(jt()),xt=function(e){var t=e.setViewer,a=Object(u.a)(),n=Object(u.b)(It,{onCompleted:function(e){e&&e.logIn&&e.logIn.token&&(t(e.logIn),sessionStorage.setItem("token",e.logIn.token),x("You've successfully logged in!"))}}),c=Object(m.a)(n,2),o=c[0],g=c[1],E=g.data,p=g.loading,h=g.error,f=Object(i.useRef)(o);Object(i.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("code");e&&f.current({variables:{input:{code:e}}})}),[]);var v=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.query({query:Pt});case 3:t=e.sent,n=t.data,window.location.href=n.authUrl,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err"),S("Sorry! We weren't able to log you in. Please try again later!");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();if(p)return s.a.createElement(R.a.Content,{className:"log-in"},s.a.createElement(it.a,{size:"large",tip:"Logging you in..."}));if(E&&E.logIn){var b=E.logIn.id;return s.a.createElement(d.a,{to:"user/".concat(b)})}var y=h?s.a.createElement(U,{description:"Sorry! We weren't able to log you in. Please try again later!"}):null;return s.a.createElement(R.a.Content,{className:"log-in"},y,s.a.createElement(N.a,{className:"log-in-card"},s.a.createElement("div",{className:"log-in-card_intro"},s.a.createElement(_.a.Title,null,s.a.createElement("span",{role:"img","aria-label":"wave"},"hi!")),s.a.createElement(_.a.Title,{level:3,className:"log-in-card__intro-title"},"Log in to TinyHouse!"),s.a.createElement(_.a.Text,null,"Sign in with Google to start booking available rentals!")),s.a.createElement("button",{className:"log-in-card__google-button",onClick:v},s.a.createElement("img",{src:Nt.a,alt:"Google Logo",className:"log-in-card__google-button-logo"}),s.a.createElement("span",{className:"log-in-card__google-button-text"},"Sign in with Google")),s.a.createElement(_.a.Text,{type:"secondary"},"Note: By signing in, you'll be redirected to the Google consent form to sign in with your Google account.")))},St=(a(420),a(158)),Ct=a.n(St),Tt=(a(421),a(430)),Lt=a(447),Ht=a(448);function Wt(){var e=Object(p.a)(["\n  mutation LogOut {\n    logOut {\n      id\n      token\n      avatar\n      hasWallet\n      didRequest\n    }\n  }\n"]);return Wt=function(){return e},e}var $t=Object(h.b)(Wt()),Gt=function(e){var t=e.viewer,a=e.setViewer,n=Object(u.b)($t,{onCompleted:function(e){e&&e.logOut&&(a(e.logOut),sessionStorage.removeItem("token"),x("You've successfully logged out"))},onError:function(){S("Sorry! We weren't able to log you out. Please try again later!")}}),r=Object(m.a)(n,1)[0],l=t.id&&t.avatar?s.a.createElement(Tt.a.SubMenu,{title:s.a.createElement(w.a,{src:t.avatar})},s.a.createElement(Tt.a.Item,{key:"user"},s.a.createElement(g.b,{to:"/user/".concat(t.id)},s.a.createElement(Lt.a,null),"Profile")),s.a.createElement(Tt.a.Item,{key:"logout"},s.a.createElement("div",{onClick:function(){r()}},s.a.createElement(Ht.a,null),"Log out"))):s.a.createElement(Tt.a.Item,null,s.a.createElement(g.b,{to:"/login"},s.a.createElement(O.a,{type:"primary"},"Sign In")));return s.a.createElement(Tt.a,{mode:"horizontal",selectable:!1,className:"menu"},s.a.createElement(Tt.a.Item,null,s.a.createElement(g.b,{to:"/host"},s.a.createElement(dt.a,null),"Host")),l)},Rt=ce.a.Search,Bt=Object(d.g)((function(e){var t=e.viewer,a=e.setViewer,n=e.history,r=e.location,l=Object(i.useState)(),c=Object(m.a)(l,2),o=c[0],u=c[1];Object(i.useEffect)((function(){var e=r.pathname,t=e.split("/");e.includes("/listings")?e.includes("/listings")&&3===t.length&&u(t[2]):u("")}),[r]);return s.a.createElement(R.a.Header,{className:"app-header"},s.a.createElement("div",{className:"app-header__logo-search-section"},s.a.createElement("div",{className:"app-header__logo"},s.a.createElement(g.b,{to:"/"},s.a.createElement("img",{src:Ct.a,alt:"App logo"}))),s.a.createElement("div",{className:"app-header__search-input"},s.a.createElement(Rt,{placeholder:"Search 'San Fransisco'",enterButton:!0,onSearch:function(e){var t=e.trim();t?n.push("/listings/".concat(t)):S("Please enter a valid search!")},value:o,onChange:function(e){return u(e.target.value)}}))),s.a.createElement("div",{className:"app-header__menu-section"},s.a.createElement(Gt,{viewer:t,setViewer:a})))})),Dt=function(){return s.a.createElement(R.a.Header,{className:"app-header"},s.a.createElement("div",{className:"app-header__logo-search-section"},s.a.createElement("div",{className:"app-header__logo"},s.a.createElement("img",{src:Ct.a,alt:"App logo"}))))},At={id:null,token:null,avatar:null,hasWallet:null,didRequest:!1},Ut=function(){var e=Object(i.useState)(At),t=Object(m.a)(e,2),a=t[0],n=t[1],r=Object(u.b)(It,{onCompleted:function(e){e&&e.logIn&&(n(e.logIn),e.logIn.token?sessionStorage.setItem("token",e.logIn.token):sessionStorage.removeItem("token"))}}),l=Object(m.a)(r,2),c=l[0],o=l[1].error,p=Object(i.useRef)(c);if(Object(i.useEffect)((function(){p.current()}),[]),!a.didRequest&&!o)return s.a.createElement(R.a,{className:"app"},s.a.createElement(Dt,null),s.a.createElement("div",{className:"app-skeleton__spin-section"},s.a.createElement(it.a,{size:"large",tip:"Launching Vv"})));var h=o?s.a.createElement(U,{description:"We weren't able to verify if you were logged in. Please try again later"}):null;return s.a.createElement(g.a,null,s.a.createElement(R.a,{className:"app"},h,s.a.createElement(Ve.a,{offsetTop:0,className:"app_affix-header"},s.a.createElement(Bt,{viewer:a,setViewer:n})),s.a.createElement(d.d,null,s.a.createElement(d.b,{exact:!0,path:"/",component:Ce}),s.a.createElement(d.b,{exact:!0,path:"/login",render:function(e){return s.a.createElement(xt,Object.assign({},e,{setViewer:n}))}}),s.a.createElement(d.b,{exact:!0,path:"/stripe",render:function(e){return s.a.createElement(st,Object.assign({},e,{viewer:a,setViewer:n}))}}),s.a.createElement(d.b,{exact:!0,path:"/user/:id",render:function(e){return s.a.createElement(ne,Object.assign({},e,{viewer:a,setViewer:n}))}}),s.a.createElement(d.b,{exact:!0,path:"/host",render:function(e){return s.a.createElement(_t,Object.assign({},e,{viewer:a}))}}),s.a.createElement(d.b,{exact:!0,path:"/listing/:id",component:Me}),s.a.createElement(d.b,{exact:!0,path:"/listings/:location?",component:nt}),s.a.createElement(d.b,{component:E}))))},qt=a(57),zt=new h.a({uri:"/api",request:function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=sessionStorage.getItem("token"),t.setContext({headers:{"X-CSRF-TOKEN":a||""}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});o.a.render(s.a.createElement(qt.a,{client:zt},s.a.createElement(Ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[236,1,2]]]);
//# sourceMappingURL=main.0530eb27.chunk.js.map